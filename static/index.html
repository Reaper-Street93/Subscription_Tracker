<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SubTracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <nav class="site-nav" aria-label="Main navigation">
      <div class="nav-inner">
        <a class="brand" href="/">SubTracker</a>
        <div class="nav-links">
          <a href="/" class="active" aria-current="page">Dashboard</a>
          <a href="/about.html">About</a>
        </div>
      </div>
    </nav>

    <main class="layout">
      <header class="hero">
        <div class="hero-head">
          <div>
            <p class="kicker">Simple Subscription Management</p>
            <h1>SubTracker</h1>
            <p class="hero-copy">
              Track recurring bills in one place, spot overspending quickly, and keep upcoming payments easy to see.
            </p>
          </div>
          <div id="userSession" class="user-session" hidden>
            <p id="userBadge" class="subtle"></p>
            <button id="logoutBtn" class="secondary-btn" type="button">Logout</button>
          </div>
        </div>
      </header>

      <section id="authPanel" class="panel auth-panel">
        <div class="panel-header">
          <h2 id="authTitle">Sign In</h2>
          <span class="subtle">Secure access to your subscriptions</span>
        </div>
        <div class="auth-toggle">
          <button id="authLoginModeBtn" class="secondary-btn mode-btn active" type="button">Login</button>
          <button id="authSignupModeBtn" class="secondary-btn mode-btn" type="button">Sign Up</button>
        </div>
        <form id="authForm" novalidate>
          <label id="authNameField" hidden>
            Full Name
            <input type="text" name="authName" placeholder="Jane Doe" autocomplete="name" />
          </label>
          <label>
            Email
            <input type="email" name="authEmail" placeholder="you@example.com" autocomplete="email" required />
          </label>
          <label>
            Password
            <input
              type="password"
              name="authPassword"
              minlength="8"
              placeholder="At least 8 characters"
              autocomplete="current-password"
              required
            />
          </label>
          <button id="authSubmitBtn" type="submit">Sign In</button>
          <p id="authMessage" class="form-message" role="status" aria-live="polite"></p>
        </form>
      </section>

      <div id="appShell" hidden>
        <section class="stats-grid" aria-label="Monthly summary">
          <article class="stat-card">
            <h2>Total Monthly Spend</h2>
            <p id="totalMonthlySpend" class="stat-value">$0.00</p>
          </article>
          <article class="stat-card">
            <h2>Next Payment</h2>
            <p id="nextReminder" class="stat-value">No reminders</p>
          </article>
        </section>

        <section class="content-grid">
          <article class="panel form-panel">
            <h2 id="formTitle">Add Subscription</h2>
            <form id="subscriptionForm" novalidate>
              <label>
                Name
                <input type="text" name="name" placeholder="Netflix" required />
              </label>

              <label>
                Category
                <select id="subscriptionCategorySelect" name="category" required></select>
              </label>

              <div class="category-manager">
                <div class="panel-header category-manager-header">
                  <h3>Manage Categories</h3>
                  <span class="subtle">Quick add or remove</span>
                </div>
                <div class="category-create">
                  <input
                    id="newCategoryInput"
                    type="text"
                    placeholder="Add new category"
                    maxlength="40"
                    aria-label="New category name"
                  />
                  <button id="addCategoryBtn" class="secondary-btn" type="button">Add</button>
                </div>
                <p id="categoryMessage" class="form-message" role="status" aria-live="polite"></p>
                <ul id="categoryList" class="category-list"></ul>
              </div>

              <label>
                Billing Amount (USD)
                <input type="number" name="amount" min="0.01" step="0.01" placeholder="15.99" required />
              </label>

              <label>
                Billing Cycle
                <select name="billingCycle" required>
                  <option value="monthly">Monthly</option>
                  <option value="quarterly">Quarterly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </label>

              <label>
                Next Payment Date
                <input type="date" name="nextPaymentDate" required />
              </label>

              <div class="form-actions">
                <button id="submitBtn" type="submit">Save Subscription</button>
                <button id="cancelEditBtn" class="secondary-btn" type="button" hidden>Cancel Edit</button>
              </div>
              <p id="formMessage" class="form-message" role="status" aria-live="polite"></p>
            </form>
          </article>

          <article class="panel chart-panel">
            <div class="panel-header">
              <h2>Spend by Category</h2>
              <span class="subtle">Monthly view</span>
            </div>
            <div class="chart-wrap">
              <div id="pieChart" class="pie-chart" aria-label="Spending by category"></div>
              <ul id="pieLegend" class="pie-legend"></ul>
            </div>
          </article>
        </section>

        <section class="content-grid second-row">
          <article class="panel">
            <div class="panel-header">
              <h2>Subscriptions</h2>
              <span id="subscriptionCount" class="subtle">0 items</span>
            </div>
            <div class="filters-row">
              <input id="searchInput" type="search" placeholder="Search subscription" />
              <select id="categoryFilterSelect" aria-label="Filter by category">
                <option value="">All categories</option>
              </select>
              <select id="sortSelect" aria-label="Sort subscriptions">
                <option value="due_soon">Sort: Due Soon</option>
                <option value="cost_desc">Sort: Cost High to Low</option>
                <option value="cost_asc">Sort: Cost Low to High</option>
                <option value="name_asc">Sort: Name A to Z</option>
                <option value="newest">Sort: Newest Added</option>
              </select>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Cycle</th>
                    <th>Amount</th>
                    <th>Monthly Cost</th>
                    <th>Next Payment</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="subscriptionsBody"></tbody>
              </table>
              <p id="emptySubscriptions" class="empty-state">No subscriptions yet. Add your first one above.</p>
            </div>
          </article>

          <article class="panel reminder-panel">
            <div class="panel-header">
              <h2>Upcoming Reminders</h2>
              <span class="subtle">Next 30 days</span>
            </div>
            <div class="reminder-controls">
              <button id="enableNotificationsBtn" class="secondary-btn" type="button">Enable Browser Alerts</button>
              <p id="notificationStatus" class="notification-status">Notifications are off.</p>
            </div>
            <ul id="remindersList" class="reminders-list"></ul>
            <p id="emptyReminders" class="empty-state">No reminders yet.</p>
          </article>
        </section>
      </div>
    </main>

    <script src="/app.js" defer></script>
  </body>
</html>
